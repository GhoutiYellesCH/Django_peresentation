{% extends 'base.html' %}
{% block content %}
  <div class="row">
    <div class="col-md-7">
      <h1 class="display-5 fw-bold text-success">Phase 4: S√©curit√© Int√©gr√©e (Le Bouclier de Django) üõ°Ô∏è</h1>
      <p class="lead">Django offre une protection par d√©faut contre les vuln√©rabilit√©s web courantes, garantissant un d√©veloppement √† la fois rapide et s√ªr sans effort suppl√©mentaire.</p>
      
      <h3 class="mt-4 text-warning">Les 3 Protections Automatiques (Le Saviez-vous ?)</h3>
      <ul class="list-group list-group-flush bg-dark border-0">
        <li class="list-group-item bg-dark text-light border-success fs-5">
          <strong class="text-info">CSRF (Cross-Site Request Forgery)</strong> : Prot√©g√© via <code>{% csrf_token %}</code> dans tous les formulaires POST.
        </li>
        <li class="list-group-item bg-dark text-light border-success fs-5">
          <strong class="text-info">XSS (Cross-Site Scripting)</strong> : Les donn√©es sont automatiquement √©chapp√©es dans les templates (protection int√©gr√©e).
        </li>
        <li class="list-group-item bg-dark text-light border-success fs-5">
          <strong class="text-info">SQL Injection</strong> : L'ORM prot√®ge en param√©trant toutes les requ√™tes (plus besoin d'√©crire de SQL dangereux).
        </li>
      </ul>

      <h3 class="mt-4">Live Demo: Acc√®s Prot√©g√© (Authentification Requise)</h3>
      <p>L'acc√®s au Tableau de Bord (Phase 5) est s√©curis√© par un simple d√©corateur Python. Si vous n'√™tes pas connect√©, vous √™tes redirig√© ici :</p>
      <a href="{% url 'login' %}" class="btn btn-primary btn-lg mt-2">Tester la Connexion (Page Prot√©g√©e)</a>
    </div>
    
    <div class="col-md-5">
      <h3 class="mt-4">Code S√©curit√© 1: Prot√©ger une Vue</h3>
      {% verbatim %}
      <pre><code class="language-python">
# presentation/views.py
from django.contrib.auth.decorators import login_required

@login_required # La cl√© de la protection !
def dashboard(request):
    # Cette vue ne s'ex√©cutera que si l'utilisateur est connect√©.
    return render(request, 'dashboard.html')
      </code></pre>
      {% endverbatim %}

      <h3 class="mt-4">Code S√©curit√© 2: Prot√©ger un Formulaire (CSRF)</h3>
      <p class="text-muted">Le jeton `{% csrf_token %}` est ins√©r√© par Django pour chaque soumission.</p>
      {% verbatim %}
      <pre><code class="language-html">
&lt;form method="post"&gt;
    {% csrf_token %} &lt;-- Le jeton anti-hacker
    &lt;input type="text" name="data"&gt;
&lt;/form&gt;
      </code></pre>
      {% endverbatim %}
    </div>
  </div>
  <hr>
  <div class="d-grid gap-2 d-md-flex justify-content-md-end">
    <a href="{% url 'dashboard' %}" class="btn btn-success btn-lg">Phase 5 Suivante: Dashboard & Admin ‚Üí</a>
  </div>
{% endblock %}